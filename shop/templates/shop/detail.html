<!DOCTYPE html>
<html dir="rtl" lang="fa">
{% extends 'parent/base.html' %}
{% load static %}
{% block title %}Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­ØµÙˆÙ„{% endblock %}

{% block content %}

		<div class="body">

			<div role="main" class="main shop pt-4">

				<div class="container">

					<div class="row">
						<div class="col-lg-6">

							<div class="" data-plugin-options="{'items': 1}">
                                {% for img in product.images.all %}
								<div>
									<img alt="" class="img-fluid" src="{{ img.file.url }} ">
								</div>
                                    <span>
                                    {{ product.features.memory }}
                                    </span>

                                {% endfor %}

							</div>

						</div>

						<div class="col-lg-6">

							<div class="summary entry-summary">

								<h1 class="mb-2 font-weight-bold text-7">{{ product.name }}</h1>

								<div class="py-1 clearfix">
									<div title="Rated 3 out of 5" class="float-left">
										<input type="text" class="d-none" value="3" title="" data-plugin-star-rating data-plugin-options="{'displayOnly': true, 'color': 'primary', 'size':'xs', 'language':'fa'}" data-rtl="true">
									</div>


								</div>

								<p class="price">
                                    <del><span class="amount">{{ product.price }} ØªÙˆÙ…Ø§Ù†</span></del>
									<span class="amount text-dark font-weight-semibold">{{ product.new_price }} ØªÙˆÙ…Ø§Ù†</span>
								</p>

								<p class="mb-4">Ù…ÙˆØ¬ÙˆØ¯ÛŒ: {{ product.inventory }}</p>
									<div class="quantity quantity-lg">
										<input type="button" class="minus" value="-">
										<input type="text" class="input-text qty text" title="Qty" value="1" name="quantity" id="id-quantity" min="1" step="1">
										<input type="button" class="plus" value="+">
									</div>
                                {% if count %}
                                    <button type="button" class="btn btn-primary btn-modern text-uppercase mb-4" id="add-cart" disabled>ÙØ§Ù‚Ø¯ Ù…ÙˆØ¬ÙˆØ¯ÛŒ</button>
                                {% endif %}
                            {% comment %} ----------------------------------------------------- {% endcomment %}

        <div class="product-meta mb-4">
            <h5 class="text-uppercase mb-2 font-weight-bold">Ù…Ø´Ø®ØµØ§Øª Ú©Ù„ÛŒØ¯ÛŒ</h5>

            {% with features=product.features.first %}
            {% if features %}
            <ul class="list list-unstyled list-borders">
                <li>
                    <strong class="text-dark">ØªÙˆÙ„ÛŒØ¯ Ú©Ù†Ù†Ø¯Ù‡:</strong>
                    {{ features.get_manufacturer_display }}
                </li>
                <li>
                    <strong class="text-dark">Ø­Ø§ÙØ¸Ù‡ Ú¯Ø±Ø§ÙÛŒÚ©ÛŒ (VRAM):</strong>
                    {{ features.memory }} GB
                </li>
                <li>
                    <strong class="text-dark">ØªÙˆØ§Ù† Ù…ØµØ±ÙÛŒ (TDP):</strong>
                    {{ features.tdp }} ÙˆØ§Øª
                </li>
                <li>
                    <strong class="text-dark">Ø·ÙˆÙ„ Ú©Ø§Ø±Øª:</strong>
                    {{ features.card_length }} Ù…ÛŒÙ„ÛŒâ€ŒÙ…ØªØ±
                </li>
                <li>
                    <strong class="text-dark">ÙˆØ¶ÙˆØ­ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ:</strong>
                    {{ features.get_suggested_resolution_display }}
                </li>
                <li>
                    <strong class="text-dark">Ø±Ø§Ø¨Ø· (Interface):</strong>
                    PCIe {{ features.interface }}
                </li>
            </ul>
            {% else %}
            <p>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙÙ†ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª.</p>
            {% endif %}
            {% endwith %}
        </div>

        {% comment %} ----------------------------------------------------- {% endcomment %}
                                    <button type="button" class="btn btn-primary btn-modern text-uppercase mb-4" id="add-cart">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯</button>

								<div class="product-meta">
									<span class="posted-in">Ø¯Ø³ØªÙ‡ Ù‡Ø§: <a rel="tag" href="#">{{ product.category }}</a></span>
								</div>


							</div>


						</div>
					</div>

					<div class="row">
						<div class="col">
							<div class="tabs tabs-product mb-2">
								<ul class="nav nav-tabs d-block d-sm-flex">
									<li class="nav-item active"><a class="nav-link py-3 px-4" href="#productDescription" data-toggle="tab">ØªÙˆØ¶ÛŒØ­Ø§Øª</a></li>
								</ul>
								<div class="tab-content p-0">
									<div class="tab-pane p-4 active" id="productDescription">
										<p>{{ product.description }}</p>
									</div>

								</div>
							</div>
						</div>
					</div>

				</div>

			</div>

		</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    $(document).ready(function(){
        $('#add-cart').click(function(){
            var button = $(this);
            var quantity = document.getElementById('id-quantity').value;

            $.ajax({
               type: 'POST',
               url: '{% url 'cart:add_to_cart' product.id %}',
               data:{
                   'csrfmiddlewaretoken':'{{ csrf_token }}',
                    'quantity': quantity,
               },
               success: function(data) {
                   $('#item_count').text(data.item_count);
                   $('#total_price').text(data.total_price);
                   if (data.cart_count === true) {
                       $('#add-cart').attr('disabled', true);
                       $('#add-cart').text('ÙØ§Ù‚Ø¯ Ù…ÙˆØ¬ÙˆØ¯ÛŒ');
                   }
               },
            });
        });
    });

   $(document).ready(function(){
    // ... Ú©Ø¯ AJAX Ø´Ù…Ø§ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯ ...

    // ğŸ’¡ Ù…Ù†Ø·Ù‚ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø«Ø¨Øª Ùˆ Ù…Ù†ÙÛŒ
    $('.plus').click(function() {
        var quantityInput = $('#id-quantity');
        var currentVal = parseInt(quantityInput.val());
        var maxVal = quantityInput.attr('max');

        // Ø§Ú¯Ø± Ø­Ø¯Ø§Ú©Ø«Ø± ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡ ÛŒØ§ Ù†Ø§Ù…Ø´Ø®Øµ Ø¨ÙˆØ¯ Ùˆ Ø¹Ø¯Ø¯ Ù…Ø¹ØªØ¨Ø± Ø¨ÙˆØ¯
        if (!isNaN(currentVal) && (maxVal === undefined || currentVal < parseInt(maxVal))) {
            quantityInput.val(currentVal + 1);
        }
    });

    $('.minus').click(function() {
        var quantityInput = $('#id-quantity');
        var currentVal = parseInt(quantityInput.val());
        var minVal = parseInt(quantityInput.attr('min'));

        // Ø§Ú¯Ø± Ø¹Ø¯Ø¯ Ù…Ø¹ØªØ¨Ø± Ø¨ÙˆØ¯ Ùˆ Ø¨ÛŒØ´ØªØ± Ø§Ø² Ø­Ø¯Ø§Ù‚Ù„ Ù…Ø¬Ø§Ø² Ø¨ÙˆØ¯
        if (!isNaN(currentVal) && currentVal > minVal) {
            quantityInput.val(currentVal - 1);
        }
    });
});
</script>

{% endblock %}
</html>